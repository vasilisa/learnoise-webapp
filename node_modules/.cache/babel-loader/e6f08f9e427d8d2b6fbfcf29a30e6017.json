{"ast":null,"code":"var _jsxFileName = \"/Users/vasilisaskvortsova/Documents/LEARNOISE-local/webap-learnoise-2/src/components/Consent/Consent.js\";\nimport React, { Component } from \"react\";\nimport { Button } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\nimport Checkbox from '../Checkbox/Checkbox';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup'; // for newer version \n\nconst consents = [{\n  content: 'I have read the information above, and understand what the study involves',\n  type: 'checkBox1'\n}, {\n  content: 'I consent to the processing of my personal information (e.g. User Id) for the purposes of this research study. I understand that such information will remain confidential and will be handled in accordance with all applicable data protection legislation and ethical standards in research. These data will only be accessible to the study team and individuals from the University and Funder who are responsible for monitoring and audits.',\n  type: 'checkBox2'\n}, {\n  content: 'I consent to being re-contacted for the purposes of this research study.',\n  type: 'checkBox3'\n}, {\n  type: 'checkBox4',\n  content: 'I understand that my anonymised personal data can be shared with others for future research, shared in public databases and in scientific reports.'\n}, {\n  type: 'checkBox5',\n  content: 'I understand that I am free to withdraw from this study at any time without giving a reason and this will not affect my future medical care or legal rights.'\n}, {\n  type: 'checkBox6',\n  content: 'I understand the potential benefits and risks of participating, the support available to me should I become distressed during the research, and who to contact if I wish to lodge a complaint.'\n}, {\n  type: 'checkBox7',\n  content: 'I understand the inclusion and exclusion criteria in the Information Sheet and as explained to me by the researcher.  I confirm that I do not fall under the exclusion criteria.'\n}, {\n  type: 'checkBox8',\n  content: 'I agree that the research project named above has been explained to me to my satisfaction and I agree to take part in this study.'\n}];\nvar options = {};\n\nfor (var key in consents) {\n  options[consents[key].type] = false;\n} // console.log(consents)\n\n\nclass Consent extends Component {\n  constructor(props) {\n    super(props);\n    const participant_info = this.props.location.state.participant_info;\n    console.log(participant_info);\n    this.state = {\n      checkboxes: options,\n      participant_info: participant_info,\n      consents: consents\n    }; // console.log(this.state.checkboxes)\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.createCheckBox = this.createCheckBox.bind(this);\n    this.createCheckBoxes = this.createCheckBoxes.bind(this);\n    this.redirectToInfo = this.redirectToInfo.bind(this); // this.selectAllCheckboxes = this.selectAllCheckboxes.bind(this)\n    // this.selectAll           = this.selectAll.bind(this)\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    document.body.style.background = '#fff';\n    window.history.pushState(window.state, null, window.location.href);\n    window.addEventListener('popstate', e => this._handleGoBack(e));\n  }\n\n  _handleGoBack(event) {\n    window.history.go(1);\n  }\n\n  handleCheckboxChange(changeEvent, e) {\n    // console.log('ChangeEvent',changeEvent)\n    this.setState(prevState => ({\n      checkboxes: { ...prevState.checkboxes,\n        [changeEvent]: !prevState.checkboxes[changeEvent]\n      }\n    }));\n  }\n\n  redirectToInfo() {\n    this.props.history.push({\n      pathname: `/`\n    });\n  } // selectAllCheckboxes(isSelected){\n  //     // console.log(this.state.checkboxes)\n  //     Object.keys(this.state.checkboxes).forEach(checkbox => {\n  //       // BONUS: Can you explain why we pass updater function to setState instead of an object?\n  //       this.setState(prevState => ({\n  //         checkboxes: {\n  //           ...prevState.checkboxes,\n  //           [checkbox]: isSelected\n  //         }\n  //       }));\n  //     });\n  //   };\n  // selectAll(){\n  //   // console.log(this.state.checkboxes)\n  //   this.selectAllCheckboxes(true);\n  // } \n\n\n  handleSubmit(event) {\n    // console.log(event)\n    event.preventDefault(); // Check if all of the boxes are checked -> redirect to Survey, otherwise POP--UP window: do you want to leave the study?  \n    // console.log(this.state.checkboxes)\n\n    const options = this.state.checkboxes; // const answers   = this.state.answers\n\n    const box_total = Object.keys(options).length;\n\n    const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\n\n    const count = sumValues(this.state.checkboxes); // console.log('Number of checked boxes:',count)\n    // sub select only answer options that have been checked \n\n    if (count < box_total) {\n      // at least one box is checked\n      const r = window.confirm(\"You cannot proceed to the study unless you give your full consent. Please, confirm if you decide to leave the study now\");\n\n      if (r == true) {\n        window.location.href = \"https://app.prolific.co\";\n      }\n    } else if (count === box_total) {\n      // redirect to survey here \n      // this.props.history.push({\n      //   pathname: `/Survey`, \n      //   state: {participant_info: this.props.location.state.participant_info, newblock_frame: true} // to be changed\n      // })\n      // redirect to the Instructions for the task here \n      this.props.history.push({\n        pathname: `/Instructions`,\n        state: {\n          participant_info: this.state.participant_info\n        }\n      });\n    } else {}\n  }\n\n  createCheckBox(key) {\n    return /*#__PURE__*/React.createElement(Checkbox, {\n      label: key.content,\n      type: key.type,\n      isSelected: options[key],\n      onCheckboxChange: e => this.handleCheckboxChange(key.type, e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }\n    });\n  }\n\n  createCheckBoxes() {\n    consents.map(this.createCheckBox); // take an object, iterate over and for each key value pair in this object apply the function createCheckBox\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(CSSTransitionGroup, {\n      className: \"container\",\n      component: \"div\",\n      transitionName: \"fade\",\n      transitionEnterTimeout: 800,\n      transitionLeaveTimeout: 500,\n      transitionAppear: true,\n      transitionAppearTimeout: 500,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"IntroConsentText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }, \"If you are happy to proceed please read the statement below and click the boxes to show that you consent to this study proceeding.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }\n    }), consents.map(this.createCheckBox)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 pad-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-save btn-primary pad-20\",\n      onClick: this.redirectToInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }\n    }, \"Previous\"))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 pad-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-save btn-primary pad-20\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }\n    }, \"SUBMIT\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }\n    }))));\n  }\n\n}\n\nexport default withRouter(Consent);","map":{"version":3,"sources":["/Users/vasilisaskvortsova/Documents/LEARNOISE-local/webap-learnoise-2/src/components/Consent/Consent.js"],"names":["React","Component","Button","withRouter","Checkbox","CSSTransitionGroup","consents","content","type","options","key","Consent","constructor","props","participant_info","location","state","console","log","checkboxes","handleSubmit","bind","createCheckBox","createCheckBoxes","redirectToInfo","componentDidMount","_isMounted","document","body","style","background","window","history","pushState","href","addEventListener","e","_handleGoBack","event","go","handleCheckboxChange","changeEvent","setState","prevState","push","pathname","preventDefault","box_total","Object","keys","length","sumValues","obj","values","reduce","a","b","count","r","confirm","map","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Button } from 'react-bootstrap';\nimport {withRouter} from 'react-router-dom';\nimport Checkbox from '../Checkbox/Checkbox';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup'; // for newer version \n\n\nconst consents = [\n  {\n    content: 'I have read the information above, and understand what the study involves',\n    type: 'checkBox1',\n  },\n  {\n    content: 'I consent to the processing of my personal information (e.g. User Id) for the purposes of this research study. I understand that such information will remain confidential and will be handled in accordance with all applicable data protection legislation and ethical standards in research. These data will only be accessible to the study team and individuals from the University and Funder who are responsible for monitoring and audits.',\n    type: 'checkBox2',\n  },\n  {\n    content: 'I consent to being re-contacted for the purposes of this research study.',\n    type: 'checkBox3',\n  },\n  {\n    type: 'checkBox4',\n    content: 'I understand that my anonymised personal data can be shared with others for future research, shared in public databases and in scientific reports.',\n  },\n\n  {\n    type: 'checkBox5',\n    content: 'I understand that I am free to withdraw from this study at any time without giving a reason and this will not affect my future medical care or legal rights.',\n  },\n  {\n    type: 'checkBox6',\n    content: 'I understand the potential benefits and risks of participating, the support available to me should I become distressed during the research, and who to contact if I wish to lodge a complaint.',\n  },\n  {\n    type: 'checkBox7',\n    content: 'I understand the inclusion and exclusion criteria in the Information Sheet and as explained to me by the researcher.  I confirm that I do not fall under the exclusion criteria.',\n},\n  {\n    type: 'checkBox8',\n    content: 'I agree that the research project named above has been explained to me to my satisfaction and I agree to take part in this study.',\n  },\n];\n\n\nvar options = {}\n  for (var key in consents) {\n    options[consents[key].type] = false \n  }\n\n\n// console.log(consents)\n\nclass Consent extends Component {\n  constructor(props) {\n    super(props);\n\n    const participant_info = this.props.location.state.participant_info\n  \n\n    console.log(participant_info)\n\n    \n    this.state = {\n      checkboxes: options,\n      participant_info: participant_info,\n      consents: consents \n    };\n\n  // console.log(this.state.checkboxes)\n\n  this.handleSubmit        = this.handleSubmit.bind(this);  \n  this.createCheckBox      = this.createCheckBox.bind(this);\n  this.createCheckBoxes    = this.createCheckBoxes.bind(this)\n  this.redirectToInfo      = this.redirectToInfo.bind(this); \n  // this.selectAllCheckboxes = this.selectAllCheckboxes.bind(this)\n  // this.selectAll           = this.selectAll.bind(this)\n  \n  }\n\n\n  componentDidMount() { \n  this._isMounted = true;\n  document.body.style.background= '#fff'; \n    window.history.pushState(window.state, null, window.location.href);\n    window.addEventListener('popstate', e => this._handleGoBack(e));\n  \n  }\n\n_handleGoBack(event){\n    window.history.go(1);\n  }\n\n\nhandleCheckboxChange(changeEvent,e) {\n  // console.log('ChangeEvent',changeEvent)\n  this.setState(prevState => ({\n      checkboxes: {\n        ...prevState.checkboxes,\n        [changeEvent]: !prevState.checkboxes[changeEvent],\n      }\n    }));\n}\n\n\nredirectToInfo() {\n   this.props.history.push({\n     pathname: `/`, \n   })\n }\n\n\n// selectAllCheckboxes(isSelected){\n//     // console.log(this.state.checkboxes)\n\n//     Object.keys(this.state.checkboxes).forEach(checkbox => {\n//       // BONUS: Can you explain why we pass updater function to setState instead of an object?\n//       this.setState(prevState => ({\n//         checkboxes: {\n//           ...prevState.checkboxes,\n//           [checkbox]: isSelected\n//         }\n//       }));\n//     });\n\n//   };\n// selectAll(){\n//   // console.log(this.state.checkboxes)\n//   this.selectAllCheckboxes(true);\n// } \n\n\nhandleSubmit(event) {\n        \n        // console.log(event)\n        \n        event.preventDefault();\n\n        // Check if all of the boxes are checked -> redirect to Survey, otherwise POP--UP window: do you want to leave the study?  \n        // console.log(this.state.checkboxes)\n        const options   = this.state.checkboxes\n        // const answers   = this.state.answers\n        const box_total = Object.keys(options).length\n\n        const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\n        const count     = sumValues(this.state.checkboxes);\n        // console.log('Number of checked boxes:',count)\n        \n        // sub select only answer options that have been checked \n        if (count < box_total){ // at least one box is checked\n            const r = window.confirm(\"You cannot proceed to the study unless you give your full consent. Please, confirm if you decide to leave the study now\"); if(r == true){ window.location.href=\"https://app.prolific.co\"}\n        }\n\n        else if (count===box_total) {\n          \n        // redirect to survey here \n\n          // this.props.history.push({\n          //   pathname: `/Survey`, \n          //   state: {participant_info: this.props.location.state.participant_info, newblock_frame: true} // to be changed\n          // })\n\n          // redirect to the Instructions for the task here \n          this.props.history.push({\n            pathname: `/Instructions`, \n            state: {participant_info: this.state.participant_info}\n          })\n        \n        \n\n        }\n\n        else {\n\n        }\n      }\n\n\n\ncreateCheckBox(key) {\n  return (\n      <Checkbox\n        label           ={key.content}\n        type            ={key.type}\n        isSelected      ={options[key]}\n        onCheckboxChange={(e)=>this.handleCheckboxChange(key.type,e)}\n      />\n    );\n  }\n\n\ncreateCheckBoxes(){\n  consents.map(\n  this.createCheckBox); // take an object, iterate over and for each key value pair in this object apply the function createCheckBox\n}\n\n  render() {\n    return (\n    <CSSTransitionGroup\n      className=\"container\"\n      component=\"div\"\n      transitionName=\"fade\"\n      transitionEnterTimeout={800}\n      transitionLeaveTimeout={500}\n      transitionAppear\n      transitionAppearTimeout={500}\n    >\n      <div className=\"IntroConsentText\">\n          <p>If you are happy to proceed please read the statement below and click the boxes to show that you consent to this study proceeding.</p>\n          <br></br>\n          {consents.map(this.createCheckBox)} \n        </div>\n      \n      <p></p>\n      <div className=\"col-md-12 pad-20\">\n        <div>\n          <button type=\"button\" className=\"btn btn-save btn-primary pad-20\" onClick={this.redirectToInfo}>\n            Previous\n          </button>\n          </div>\n      </div>\n      <p></p>\n      <center>\n      <div className=\"col-md-12 pad-20\">\n        <div>\n          <button type=\"button\" className=\"btn btn-save btn-primary pad-20\" onClick={this.handleSubmit}>\n            SUBMIT\n          </button>\n        </div>\n        <p></p>\n          </div>\n      </center>\n\n    </CSSTransitionGroup>\n  );\n  }\n\n\n}\n\n\nexport default withRouter(Consent);\n"]},"metadata":{},"sourceType":"module"}