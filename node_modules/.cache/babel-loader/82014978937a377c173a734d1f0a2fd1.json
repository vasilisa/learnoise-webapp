{"ast":null,"code":"import _defineProperty from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/src/components/Consent/Consent.js\";\nimport React, { Component } from \"react\";\nimport { Button } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\nimport Checkbox from '../Checkbox/Checkbox';\nimport { CSSTransitionGroup } from 'react-transition-group'; // create an Object directly \n// const consents = \n//   {\n//     'checkBox1': 'I have read the information above, and understand what the study involves',\n//     'checkBox2': 'I understand that my anonymised personal data can be shared with others for future research, shared in public databases and in scientific reports.',\n//     'checkBox3': 'I understand that I am free to withdraw from this study at any time without giving a reason and this will not affect my future medical care or legal rights.',\n//     'checkBox4': 'I understand the potential benefits and risks of participating, the support available to me should I become distressed during the research, and who to contact if I wish to lodge a complaint.',\n//     'checkBox5': 'I understand the inclusion and exclusion criteria in the Information Sheet and as explained to me by the researcher.  I confirm that I do not fall under the exclusion criteria.',\n//     'checkBox6': 'I agree that the research project named above has been explained to me to my satisfaction and I agree to take part in this study.',\n// }; \n\nvar consents = [{\n  content: 'I have read the information above, and understand what the study involves',\n  type: 'checkBox1'\n}, {\n  type: 'checkBox2',\n  content: 'I understand that my anonymised personal data can be shared with others for future research, shared in public databases and in scientific reports.'\n}, {\n  type: 'checkBox3',\n  content: 'I understand that I am free to withdraw from this study at any time without giving a reason and this will not affect my future medical care or legal rights.'\n}, {\n  type: 'checkBox4',\n  content: 'I understand the potential benefits and risks of participating, the support available to me should I become distressed during the research, and who to contact if I wish to lodge a complaint.'\n}, {\n  type: 'checkBox5',\n  content: 'I understand the inclusion and exclusion criteria in the Information Sheet and as explained to me by the researcher.  I confirm that I do not fall under the exclusion criteria.'\n}, {\n  type: 'checkBox6',\n  content: 'I agree that the research project named above has been explained to me to my satisfaction and I agree to take part in this study.'\n}];\nconsole.log(consents);\n\nvar Consent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Consent, _Component);\n\n  function Consent(props) {\n    var _this;\n\n    _classCallCheck(this, Consent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Consent).call(this, props));\n\n    _this.redirectToInfo = function () {\n      _this.props.history.push({\n        pathname: \"/\"\n      });\n    };\n\n    var prolific_id = _this.props.location.state.prolific_id;\n    var study_id = _this.props.location.state.study_id;\n    var longit_id = _this.props.location.state.longit_id;\n    var options = {};\n    var answers = {};\n\n    for (var key in consents) {\n      console.log(key);\n      options[consents[key].type] = false; // answers[consents[key]] = consents[key] // might be u\n    }\n\n    console.log(options);\n    console.log(answers);\n    var participant_info = _this.state = {\n      checkboxes: options\n    };\n    console.log(_this.state.checkboxes);\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.createCheckBox = _this.createCheckBox.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Consent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._isMounted = true;\n      document.body.style.background = '#fff';\n      window.history.pushState(window.state, null, window.location.href);\n      window.addEventListener('popstate', function (e) {\n        return _this2._handleGoBack(e);\n      }); //   window.onbeforeunload = this._handleRefresh\n    }\n  }, {\n    key: \"_handleGoBack\",\n    value: function _handleGoBack(event) {\n      window.history.go(1);\n    }\n  }, {\n    key: \"handleCheckboxChange\",\n    value: function handleCheckboxChange(changeEvent, e) {\n      console.log('ChangeEvent', changeEvent);\n      this.setState(function (prevState) {\n        return {\n          checkboxes: _objectSpread({}, prevState.checkboxes, _defineProperty({}, changeEvent, !prevState.checkboxes[changeEvent]))\n        };\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      // console.log(event)\n      event.preventDefault(); // Check if all of the boxes are checked -> redirect to Survey, otherwise POP--UP window: do you want to leave the study?  \n      // console.log(this.state.checkboxes)\n\n      var options = this.state.checkboxes; // const answers   = this.state.answers\n\n      var box_total = Object.keys(options).length;\n\n      var sumValues = function sumValues(obj) {\n        return Object.values(obj).reduce(function (a, b) {\n          return a + b;\n        });\n      };\n\n      var count = sumValues(this.state.checkboxes);\n      console.log('Number of checked boxes:', count); // sub select only answer options that have been checked \n\n      if (count < box_total) {\n        // at least one box is checked\n        alert(\"You cannot participate in the study if you do not give your full consent. Please, confirm if you want to terminate the study\");\n        window.location.replace(\"https://app.prolific.co\");\n      } else if (count === box_total) {\n        // redirect to survey here - maybe with the timeout  \n        this.props.history.push({\n          pathname: \"/Survey\",\n          state: {\n            participant_info: this.props.location.state.participant_info,\n            newblock_frame: true\n          } // to be changed\n\n        });\n      } else {}\n    }\n  }, {\n    key: \"handleCheckboxChange\",\n    value: function handleCheckboxChange(changeEvent, e) {\n      console.log('ChangeEvent', changeEvent);\n      this.setState(function (prevState) {\n        return {\n          checkboxes: _objectSpread({}, prevState.checkboxes, _defineProperty({}, changeEvent, !prevState.checkboxes[changeEvent]))\n        };\n      });\n    }\n  }, {\n    key: \"createCheckBox\",\n    value: function createCheckBox(key) {\n      var _this3 = this;\n\n      return React.createElement(Checkbox, {\n        label: key.content,\n        type: key.type,\n        isSelected: this.state.checkboxes[key],\n        onCheckboxChange: function onCheckboxChange(e) {\n          return _this3.handleCheckboxChange(key.type, e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(CSSTransitionGroup, {\n        className: \"container\",\n        component: \"div\",\n        transitionName: \"fade\",\n        transitionEnterTimeout: 800,\n        transitionLeaveTimeout: 500,\n        transitionAppear: true,\n        transitionAppearTimeout: 500,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"answerOptions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, consents.map(this.createCheckBox)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-12 pad-20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-save btn-primary pad-20\",\n        onClick: this.redirectToInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Previous\"))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(\"center\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12 pad-20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-save btn-primary pad-20\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Submit\")))));\n    }\n  }]);\n\n  return Consent;\n}(Component);\n/*\n<form onSubmit={this.handleFormSubmit}>\n              {this.createCheckboxes()}\n            </form>\n\n\n*/\n\n\nexport default withRouter(Consent);","map":{"version":3,"sources":["/Users/vasilisaskvortsova/Documents/COVID-19/covid-webap/src/components/Consent/Consent.js"],"names":["React","Component","Button","withRouter","Checkbox","CSSTransitionGroup","consents","content","type","console","log","Consent","props","redirectToInfo","history","push","pathname","prolific_id","location","state","study_id","longit_id","options","answers","key","participant_info","checkboxes","handleSubmit","bind","createCheckBox","_isMounted","document","body","style","background","window","pushState","href","addEventListener","e","_handleGoBack","event","go","changeEvent","setState","prevState","preventDefault","box_total","Object","keys","length","sumValues","obj","values","reduce","a","b","count","alert","replace","newblock_frame","handleCheckboxChange","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Button } from 'react-bootstrap';\nimport {withRouter} from 'react-router-dom';\nimport Checkbox from '../Checkbox/Checkbox'; \nimport { CSSTransitionGroup } from 'react-transition-group';\n\n\n\n// create an Object directly \n// const consents = \n//   {\n//     'checkBox1': 'I have read the information above, and understand what the study involves',\n    \n//     'checkBox2': 'I understand that my anonymised personal data can be shared with others for future research, shared in public databases and in scientific reports.',\n  \n//     'checkBox3': 'I understand that I am free to withdraw from this study at any time without giving a reason and this will not affect my future medical care or legal rights.',\n    \n//     'checkBox4': 'I understand the potential benefits and risks of participating, the support available to me should I become distressed during the research, and who to contact if I wish to lodge a complaint.',\n  \n//     'checkBox5': 'I understand the inclusion and exclusion criteria in the Information Sheet and as explained to me by the researcher.  I confirm that I do not fall under the exclusion criteria.',\n\n//     'checkBox6': 'I agree that the research project named above has been explained to me to my satisfaction and I agree to take part in this study.',\n// }; \n\n\nconst consents = [\n  {\n    content: 'I have read the information above, and understand what the study involves',\n    type: 'checkBox1',\n  },\n  {\n    type: 'checkBox2',\n    content: 'I understand that my anonymised personal data can be shared with others for future research, shared in public databases and in scientific reports.',\n  },\n\n  {\n    type: 'checkBox3',\n    content: 'I understand that I am free to withdraw from this study at any time without giving a reason and this will not affect my future medical care or legal rights.',\n  },\n  {\n    type: 'checkBox4',\n    content: 'I understand the potential benefits and risks of participating, the support available to me should I become distressed during the research, and who to contact if I wish to lodge a complaint.',\n  },\n  {\n    type: 'checkBox5',\n    content: 'I understand the inclusion and exclusion criteria in the Information Sheet and as explained to me by the researcher.  I confirm that I do not fall under the exclusion criteria.',\n},\n  {\n    type: 'checkBox6',\n    content: 'I agree that the research project named above has been explained to me to my satisfaction and I agree to take part in this study.',\n  },\n];\n\n\nconsole.log(consents)\n\nclass Consent extends Component {\n  constructor(props) {\n    super(props);\n\n    const prolific_id = this.props.location.state.prolific_id\n    const study_id    = this.props.location.state.study_id\n    const longit_id   = this.props.location.state.longit_id\n\n    var options = {}\n    var answers = {}\n\n  for (var key in consents) {\n    console.log(key)\n    options[consents[key].type] = false \n    // answers[consents[key]] = consents[key] // might be u\n  }\n\n  console.log(options)\n  console.log(answers)\n  \n  const participant_info = \n  this.state = {\n    checkboxes: options,\n  };\n\n  console.log(this.state.checkboxes)\n\n  this.handleSubmit       = this.handleSubmit.bind(this);  \n  this.createCheckBox     = this.createCheckBox.bind(this); \n\n}\n\n  componentDidMount() { \n  this._isMounted = true;\n  document.body.style.background= '#fff'; \n    window.history.pushState(window.state, null, window.location.href);\n    window.addEventListener('popstate', e => this._handleGoBack(e));\n  //   window.onbeforeunload = this._handleRefresh\n\n  }\n\n_handleGoBack(event){\n    window.history.go(1);\n  }\n\n\n  handleCheckboxChange(changeEvent,e) {\n  console.log('ChangeEvent',changeEvent)\n  \n  this.setState(prevState => ({\n      checkboxes: {\n        ...prevState.checkboxes,\n        [changeEvent]: !prevState.checkboxes[changeEvent],\n      }\n    }));\n}\n\nredirectToInfo = () => {\n   this.props.history.push({\n     pathname: `/`, \n   })\n }\n\n\nhandleSubmit(event) {\n        \n        // console.log(event)\n        \n        event.preventDefault();\n\n        // Check if all of the boxes are checked -> redirect to Survey, otherwise POP--UP window: do you want to leave the study?  \n        // console.log(this.state.checkboxes)\n        const options   = this.state.checkboxes\n        // const answers   = this.state.answers\n        const box_total = Object.keys(options).length\n\n        const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\n        const count = sumValues(this.state.checkboxes);\n        console.log('Number of checked boxes:',count)\n        \n        // sub select only answer options that have been checked \n\n        if (count < box_total){ // at least one box is checked\n            alert(\"You cannot participate in the study if you do not give your full consent. Please, confirm if you want to terminate the study\")\n             window.location.replace(\"https://app.prolific.co\") \n               }\n\n        else if (count===box_total) {\n          // redirect to survey here - maybe with the timeout  \n          this.props.history.push({\n            pathname: `/Survey`, \n            state: {participant_info: this.props.location.state.participant_info, newblock_frame: true} // to be changed\n          })\n        }\n        else {\n\n        }\n      }\n\n\n\nhandleCheckboxChange(changeEvent,e) {\n  console.log('ChangeEvent',changeEvent)\n  \n  this.setState(prevState => ({\n      checkboxes: {\n        ...prevState.checkboxes,\n        [changeEvent]: !prevState.checkboxes[changeEvent],\n      }\n    }));\n}\n\ncreateCheckBox(key) {\n    return (\n      <Checkbox\n        label           ={key.content}\n        type            ={key.type}\n        isSelected      ={this.state.checkboxes[key]}\n        onCheckboxChange={(e)=>this.handleCheckboxChange(key.type,e)}\n      />\n    );\n  }\n\n\n\n  render() {\n    return (\n    <CSSTransitionGroup\n      className=\"container\"\n      component=\"div\"\n      transitionName=\"fade\"\n      transitionEnterTimeout={800}\n      transitionLeaveTimeout={500}\n      transitionAppear\n      transitionAppearTimeout={500}\n    >\n        \n        <div className=\"answerOptions\">\n          {consents.map(this.createCheckBox)}\n        </div>\n      \n      <p></p>\n      <div className=\"col-md-12 pad-20\">\n        <div>\n          <button type=\"button\" className=\"btn btn-save btn-primary pad-20\" onClick={this.redirectToInfo}>\n            Previous\n          </button>\n          </div>\n      </div>\n      <p></p>\n      <center>\n      <div className=\"col-md-12 pad-20\">\n        <div>\n          <button type=\"button\" className=\"btn btn-save btn-primary pad-20\" onClick={this.handleSubmit}>\n            Submit\n          </button>\n          </div>\n      </div>\n      </center>\n\n    </CSSTransitionGroup>\n  );\n  }\n\n\n}\n\n/*\n<form onSubmit={this.handleFormSubmit}>\n              {this.createCheckboxes()}\n            </form>\n\n\n*/\n\nexport default withRouter(Consent);"]},"metadata":{},"sourceType":"module"}